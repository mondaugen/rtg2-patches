#N canvas 359 294 944 819 10;
#X obj 24 151 inlet;
#X obj 410 156 inlet;
#X text 410 129 tempo;
#X obj 218 151 inlet;
#X text 215 129 length of segment (divisions);
#X text 9 125 segment number;
#X obj 201 327 /;
#X obj 211 289 * 60000;
#X text 292 224 length of beat (in divisions);
#X obj 214 253 / 1;
#X obj 257 223 f \$1;
#X obj 218 180 t f b;
#X obj 540 158 inlet;
#X obj 594 292 ne.wrap;
#X floatatom 641 257 5 0 0 0 - - -;
#X obj 133 129 inlet;
#X text 101 111 length of sample (samples);
#X obj 133 406 /;
#X obj 133 435 int;
#X obj 133 471 + 1;
#X text 151 452 ceiling;
#X obj 140 696 *;
#X obj 188 369 t f f;
#X text 224 325 length of segment (ms);
#X text 167 472 number of segments in current sample \, rounded up
;
#X text 41 17 looks-up last played sample length and current tempo.
divides the sample into the number of segments of length L (expressed
in beat-divisions) and depending on mode (1) restricts incoming segment
indices to that range or (2) wraps the segment indices into the range
(ie. -1 becomes highest-segment-index - 1 \, -2 highest-segment-index
- 2 etc.);
#X text 542 139 mode (default 1);
#X obj 48 515 gate 2 1;
#X obj 48 550 expr if(($f1 >= 0) && ($f1 < $f2) \, $f1 \, -1);
#X obj 62 652 sel -1;
#X obj 299 519 t f f;
#X obj 193 596 ne.wrap;
#X floatatom 584 253 5 0 0 0 - - -;
#X obj 593 379 int;
#X floatatom 588 429 5 0 0 0 - - -;
#X obj 193 629 int;
#X obj 48 619 int;
#X text 224 632 ints are here cause maybe we want to remove them later
;
#X text 141 737 NOT FINISHED;
#X connect 0 0 27 1;
#X connect 1 0 6 1;
#X connect 3 0 11 0;
#X connect 6 0 22 0;
#X connect 7 0 6 0;
#X connect 9 0 7 0;
#X connect 10 0 9 1;
#X connect 11 0 9 0;
#X connect 11 1 10 0;
#X connect 12 0 27 0;
#X connect 13 0 33 0;
#X connect 14 0 13 1;
#X connect 15 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 19 0 30 0;
#X connect 22 0 17 1;
#X connect 22 1 21 1;
#X connect 27 0 28 0;
#X connect 27 1 31 0;
#X connect 28 0 36 0;
#X connect 29 1 21 0;
#X connect 30 0 28 1;
#X connect 30 1 31 1;
#X connect 31 0 35 0;
#X connect 32 0 13 0;
#X connect 33 0 34 0;
#X connect 35 0 21 0;
#X connect 36 0 29 0;
