#N canvas 64 22 937 756 10;
#X obj 24 134 inlet;
#X obj 474 136 inlet;
#X text 474 109 tempo;
#X obj 274 132 inlet;
#X text 271 110 length of segment (divisions);
#X text 9 108 segment number;
#X obj 274 260 /;
#X obj 274 238 * 60000;
#X text 336 187 length of beat (in divisions);
#X obj 274 215 / 1;
#X obj 301 186 f \$1;
#X obj 274 157 t f b;
#X obj 619 133 inlet;
#X obj 133 129 inlet;
#X text 101 111 length of sample (samples);
#X obj 280 327 /;
#X obj 280 356 int;
#X obj 280 392 + 1;
#X text 298 373 ceiling;
#X obj 108 530 *;
#X text 324 280 length of segment (ms);
#X text 314 393 number of segments in current sample \, rounded up
;
#X text 12 7 looks-up last played sample length and current tempo.
divides the sample into the number of segments of length L (expressed
in beat-divisions) and depending on mode (1) restricts incoming segment
indices to that range or (2) wraps the segment indices into the range
(ie. -1 becomes highest-segment-index - 1 \, -2 highest-segment-index
- 2 etc.);
#X text 621 114 mode (default 1);
#X obj 25 409 gate 2 1;
#X obj 25 444 expr if(($f1 >= 0) && ($f1 < $f2) \, $f1 \, -1);
#X obj 25 481 sel -1;
#X obj 280 413 t f f;
#X obj 170 490 ne.wrap;
#X obj 24 309 int;
#X obj 126 611 pack;
#X obj 160 180 samplerate~;
#X obj 133 204 /;
#X obj 133 230 * 1000;
#X obj 133 157 t f b;
#X text 130 252 length of sample (ms);
#X obj 274 281 t f f f;
#X obj 126 561 /;
#X text 166 613 output: start-point (fraction) length (ms);
#X obj 162 281 t f f;
#X obj 127 658 outlet;
#X floatatom 317 457 5 0 0 0 - - -;
#X connect 0 0 29 0;
#X connect 1 0 6 1;
#X connect 3 0 11 0;
#X connect 6 0 36 0;
#X connect 7 0 6 0;
#X connect 9 0 7 0;
#X connect 10 0 9 1;
#X connect 11 0 9 0;
#X connect 11 1 10 0;
#X connect 12 0 24 0;
#X connect 13 0 34 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 17 0 27 0;
#X connect 19 0 37 0;
#X connect 24 0 25 0;
#X connect 24 1 28 0;
#X connect 25 0 26 0;
#X connect 26 1 19 0;
#X connect 27 0 25 1;
#X connect 27 0 41 0;
#X connect 27 1 28 1;
#X connect 28 0 19 0;
#X connect 29 0 24 1;
#X connect 30 0 40 0;
#X connect 31 0 32 1;
#X connect 32 0 33 0;
#X connect 33 0 39 0;
#X connect 34 0 32 0;
#X connect 34 1 31 0;
#X connect 36 0 15 1;
#X connect 36 1 19 1;
#X connect 36 2 30 1;
#X connect 37 0 30 0;
#X connect 39 0 15 0;
#X connect 39 1 37 1;
